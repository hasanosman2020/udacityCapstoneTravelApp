var Client=function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";var o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==o)return o;throw new Error("unable to locate global object")}();e.exports=t=o.fetch,o.fetch&&(t.default=o.fetch.bind(o)),t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response},function(e,t){},function(e,t,n){"use strict";n.r(t),n.d(t,"performAction",(function(){return c}));var o=n(0),a=n.n(o);n(1);let r;var i=" ";async function c(e){e.preventDefault();const t=document.getElementById("destination_city").value,n=document.getElementById("dateDepart").value,o=document.getElementById("dateReturn").value,a=function(e){const t=new Date,n=Date.parse(t),o=Date.parse(e),a=Math.abs(o-n),r=Math.ceil(a/864e5);return console.log(r),r}(n),c=function(e,t){const n=Date.parse(e),o=Date.parse(t),a=Math.abs(n-o),r=Math.ceil(a/864e5);return console.log(r),r}(n,o);i=a<=1?"http://api.weatherbit.io/v2.0/current?":"http://api.weatherbit.io/v2.0/forecast/daily?",l(t).then((function(e){return console.log(e),d(i,e.geonames[0].lat,e.geonames[0].lng,e.geonames[0].countryCode,"334b39cd7f05408190e076877f6411f9")})).then((function(e){return m("/",{data:e.data,destination:t,dateDepart:n,dateReturn:o,tripDuration:c,daysTillDepart:a})})).then((function(e){return s("https://pixabay.com/api/?key=","22008827-e069452971dbec7aa6f1cef1a",t)})).then((function(e){p(e.hits[0].imageURL)})).then((function(e){return u("https://restcountries.eu/rest/v2/alpha/",r)}))}document.getElementById("depart_btn").addEventListener("click",(function(){document.querySelector(".countryinfo").classList.add("animate")})),document.getElementById("depart_btn").addEventListener("click",c);const l=async e=>{const t=await a()(`http://api.geonames.org/searchJSON?q=${e}&maxRows=10&username=hasan79`);try{const e=await t.json();return console.log(e),e}catch(e){console.log("error",e)}},d=async(e,t,n)=>{const o=await a()(`${e}&lat=${t}&lon=${n}&key=334b39cd7f05408190e076877f6411f9`);try{const e=await o.json();return console.log(e),r=e.country_code,console.log(r),e}catch(e){console.log("error",e)}},s=async(e,t,n)=>{const o=await a()(`${e}${t}&q=${n}&image_type=photo`);try{const e=await o.json();return console.log(e),e}catch(e){console.log("error",e),alert("Cannot find your destination")}},u=async(e,t)=>{const n=await a()(`${e}${t}`);try{const e=await n.json();console.log(e),document.getElementById("travelconfirmation").innerHTML=`<p>You are travelling to ${e.name}!</p>`,document.getElementById("country").innerHTML=`${e.name}`,document.querySelector("#flagcontainer").innerHTML=`<img src="${e.flag}" alt="Flag of ${e.name}">`,document.getElementById("capital").innerHTML=`Capital: ${e.capital}`,document.getElementById("language").innerHTML="Language(s): "+e.languages.filter((e=>e.name)).map((e=>`${e.name}`)).join(", "),document.getElementById("diallingcode").innerHTML="Dialling Code: +"+e.callingCodes[0],document.getElementById("currencies").innerHTML="Currency(ies): "+e.currencies.map((e=>`${e.name} (${e.code})(${e.symbol})`)).join(", "),document.getElementById("population").innerHTML="Population: "+e.population.toLocaleString("en-US"),document.getElementById("region").innerHTML=`Region: ${e.region}`,document.getElementById("subregion").innerHTML=`Sub-region: ${e.subregion}`}catch(e){console.log("error",e)}},m=async(e=" ",t={})=>{const n=await a()("http://localhost:3000",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});try{const e=await n.json();return console.log(e),e}catch(e){console.log("error",e)}},p=async e=>{const t=await a()("http://localhost:3000/data");try{const n=await t.json();if(document.getElementById("picture").src=e,document.getElementById("location").innerHTML=`Destination: ${n.destination}`,document.getElementById("outbound").innerHTML=`Trip Start: ${n.dateDepart} `,document.getElementById("inbound").innerHTML=`Trip End: ${n.dateReturn}`,document.getElementById("tripDuration").innerHTML=`Trip Duration: ${n.tripDuration} days`,1===n.daysTillDepart?document.getElementById("daysTillDepart").innerHTML="Your trip starts tomorrow!":document.getElementById("daysTillDepart").innerHTML=`You have ${n.daysTillDepart} days to go before your trip starts!`,n.daysTillDepart<=1){document.getElementById("weatherCurrent").innerHTML=`Today's weather: ${n.data[0].temp} Â°C `;const e=document.createElement("img");e.id="icon",e.src="https://www.weatherbit.io/static/img/icons"+n.data[0].weather.icon+".png",document.getElementById("weatherCurrent").appendChild(e)}else{document.getElementById("weatherHeading").innerHTML="15 - Day Weather Forecast";for(let e=0;e<16;e++){const t=document.getElementById("weatherForecast"),o=document.createElement("div");o.textContent=n.data[e].datetime;const a=document.createElement("div");a.textContent=`Max temp: ${n.data[e].high_temp}`;const r=document.createElement("div");r.textContent=`Min temp: ${n.data[e].low_temp}`;const i=document.createElement("img");i.src="https://www.weatherbit.io/static/img/icons/"+n.data[e].weather.icon+".png",i.alt="weather icon",t.appendChild(o),t.appendChild(a),t.appendChild(i),t.appendChild(r),t.appendChild(i)}}}catch(e){console.log("error",e)}}}]);
//# sourceMappingURL=main.js.map