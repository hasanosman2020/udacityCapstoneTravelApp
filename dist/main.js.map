{"version":3,"sources":["webpack://Client/webpack/bootstrap","webpack://Client/./node_modules/node-fetch/browser.js","webpack://Client/./src/client/index.js","webpack://Client/./src/client/js/app.js","webpack://Client/./src/client/styles/footer.scss?d0f5","webpack://Client/./src/client/styles/header.scss?8ec8","webpack://Client/./src/client/styles/style.scss?8ced"],"names":[],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFa;;AAEb;AACA;AACA;AACA;AACA;AACA,mCAAmC,aAAa;AAChD,qCAAqC,eAAe;AACpD,qCAAqC,eAAe;AACpD;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,mC;;;;;;;;;;;;ACxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;;AAEZ;AACC;AACA;;AAEL;;;;;;;;;;;;;ACNxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;AAE8B;AAC9B;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,iDAAK;AACzB,OAAO,gBAAgB,EAAE,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACO;AACP,oBAAoB,iDAAK;AACzB,OAAO,kBAAkB,OAAO,IAAI,OAAO,IAAI;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACO;AACP;AACA;AACA;AACA;AACA,oBAAoB,iDAAK;AACzB,OAAO,eAAe,EAAE,cAAc,KAAK,iBAAiB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACO,4CAA4C;AACnD,2BAA2B,KAAK;AAChC,oBAAoB,iDAAK;AACzB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,oBAAoB,iDAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uBAAuB;AACzD;AACA;AACA,iCAAiC,sBAAsB;AACvD;AACA;AACA,+BAA+B,sBAAsB;AACrD;AACA;AACA,oCAAoC,wBAAwB;AAC5D;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gCAAgC,0BAA0B;AAC1D;;AAEA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA,iCAAiC,uBAAuB;;AAExD;AACA;AACA;AACA;AACA,yCAAyC,wBAAwB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,QAAQ;AAC7B;;AAEA;AACA;AACA;AACA,4CAA4C,6BAA6B;AACzE;AACA,2CAA2C,4BAA4B;AACvE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;;ACrPA;AAAA;;;;;;;;;;;;;ACAA;AAAA;;;;;;;;;;;;;ACAA;AAAA","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/client/index.js\");\n","\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar global = getGlobal();\n\nmodule.exports = exports = global.fetch;\n\n// Needed for TypeScript and Webpack.\nif (global.fetch) {\n\texports.default = global.fetch.bind(global);\n}\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;","import { performAction } from './js/app'\n\nimport './styles/style.scss'\nimport './styles/header.scss'\nimport './styles/footer.scss'\n\nexport { performAction }\n","/*TODO\n- adjust the size of country image\n*/\n\nimport fetch from 'node-fetch'\nlet countries\n/*Global Variables*/\n//Geonames API\nconst geonamesBaseUrl = 'http://api.geonames.org/searchJSON?q='\n\nconst geonamesApiKey = 'hasan79'\n\n//Weatherbit API\nvar weatherbitBaseUrl = ' '\nconst weatherbitCurrent = 'http://api.weatherbit.io/v2.0/current?'\nconst weatherbitForecast = 'http://api.weatherbit.io/v2.0/forecast/daily?'\nconst weatherbitApiKey = '334b39cd7f05408190e076877f6411f9'\n\n//Pixabay API\nconst pixabayBaseUrl = 'https://pixabay.com/api/?key='\nconst pixabayApiKey = '22008827-e069452971dbec7aa6f1cef1a'\n\n/*Event Listener to add function to existing DOM element ('Let's Go!' button with id 'depart_btn') to create an eventwhen the button is clicked */\ndocument.getElementById('depart_btn').addEventListener('click', performAction)\n\nexport async function performAction (e) {\n  e.preventDefault()\n  /* const destinationCountry = document.getElementById('destinationCountry').value*/\n  const destination_city = document.getElementById('destination_city').value\n  const dateDepart = document.getElementById('dateDepart').value\n  const dateReturn = document.getElementById('dateReturn').value\n  const daysTillDepart = getDaysTillDepart(dateDepart)\n  const tripDuration = getTripDuration(dateDepart, dateReturn)\n\n  if (daysTillDepart <= 1) {\n    weatherbitBaseUrl = weatherbitCurrent\n  } else {\n    weatherbitBaseUrl = weatherbitForecast\n  }\n\n  getGeonamesData(destination_city)\n    .then(function (data) {\n      return getWeatherbitData(\n        weatherbitBaseUrl,\n        data.geonames[0].lat,\n        data.geonames[0].lng,\n        weatherbitApiKey\n      )\n    })\n    .then(function (data) {\n      return postData('/', {\n        data: data.data,\n        destination: destination_city,\n        dateDepart: dateDepart,\n        dateReturn: dateReturn,\n        tripDuration: tripDuration,\n        daysTillDepart: daysTillDepart\n      })\n    })\n    .then(function (data) {\n      return getPixabayData(pixabayBaseUrl, pixabayApiKey, destination_city)\n    })\n    .then(function (data) {\n      updateUI(data.hits[0].imageURL)\n    })\n  /*.then(function (data) {\n      return getRestCountriesInfo(countriesData)\n    })*/\n}\n\n//Function that generates the countdown to date of departure\nfunction getDaysTillDepart (dateDepart) {\n  const now = new Date()\n  const nowSeconds = Date.parse(now)\n  const dateDepartSeconds = Date.parse(dateDepart)\n  const difference = Math.abs(dateDepartSeconds - nowSeconds)\n  const daysTillDepart = Math.ceil(difference / (1000 * 60 * 60 * 24))\n  console.log(daysTillDepart)\n  return daysTillDepart\n}\n\n//Function that generates the trip duration\nfunction getTripDuration (dateDepart, dateReturn) {\n  const tripLengthDepart = Date.parse(dateDepart)\n  const tripLengthReturn = Date.parse(dateReturn)\n  const diff = Math.abs(tripLengthDepart - tripLengthReturn)\n  const tripDuration = Math.ceil(diff / (1000 * 60 * 60 * 24))\n  console.log(tripDuration)\n  return tripDuration\n}\n\n//Async function makes GET request to the Geonames API to obtain Geonames data (i.e. co-ordinates) using fetch() method\nconst getGeonamesData = async destination_city => {\n  const res = await fetch(\n    `${geonamesBaseUrl}${destination_city}&maxRows=10&username=hasan79`\n  )\n  //call API\n  try {\n    const data = await res.json()\n    console.log(data)\n    return data\n  } catch (error) {\n    console.log('error', error)\n  }\n}\n\n//Async function makes GET request to the Weatherbit API to obtain Weatherbit API data using fetch() method\nexport const getWeatherbitData = async (weatherbitBaseUrl, lat, lng) => {\n  const res = await fetch(\n    `${weatherbitBaseUrl}&lat=${lat}&lon=${lng}&key=334b39cd7f05408190e076877f6411f9`\n  )\n  //call API\n  try {\n    const data = await res.json()\n    //console.log(data)\n    return data\n  } catch (error) {\n    console.log('error', error)\n  }\n}\n\n//Async function makes GET request to the Pixabay  API to obtain images using fetch() method\nexport const getPixabayData = async (\n  pixabayBaseUrl,\n  pixabayApiKey,\n  destination_city\n) => {\n  const res = await fetch(\n    `${pixabayBaseUrl}${pixabayApiKey}&q=${destination_city}&image_type=photo`\n  )\n  //call API\n  try {\n    const data = await res.json()\n    console.log(data)\n    return data\n  } catch (error) {\n    console.log('error', error)\n    alert('Cannot find your destination')\n  }\n}\n\n//Function to POST data\nexport const postData = async (url = ' ', data = {}) => {\n  //console.log(`Data is ${data}`)\n  const res = await fetch('http://localhost:3000', {\n    method: 'POST',\n    credentials: 'same-origin',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  })\n  try {\n    const newData = await res.json()\n    console.log(newData)\n    return newData\n  } catch (error) {\n    console.log('error', error)\n  }\n}\n\nconst updateUI = async imageURL => {\n  const req = await fetch('http://localhost:3000/data')\n  try {\n    const travelData = await req.json()\n    document.getElementById('picture').src = imageURL\n    /*document.getElementById('picture').alt = travelData.destination*/\n    document.getElementById(\n      'location'\n    ).innerHTML = `Destination: ${travelData.destination}`\n    document.getElementById(\n      'outbound'\n    ).innerHTML = `Trip Start: ${travelData.dateDepart} `\n    document.getElementById(\n      'inbound'\n    ).innerHTML = `Trip End: ${travelData.dateReturn}`\n    document.getElementById(\n      'tripDuration'\n    ).innerHTML = `Trip Duration: ${travelData.tripDuration} days`\n    if (travelData.daysTillDepart === 1) {\n      document.getElementById('daysTillDepart').innerHTML =\n        'Your trip starts tomorrow!'\n    } else {\n      document.getElementById(\n        'daysTillDepart'\n      ).innerHTML = `You have ${travelData.daysTillDepart} days to go before your trip starts!`\n    }\n\n    document.getElementById(\n      'capital'\n    ).innerHTML = `Capital: ${countryData.capital}`\n    document.getElementById('language').innerHTML =\n      'Language(s): ' +\n      countryData.languages\n        .filter(n => n.name)\n        .map(n => `${n.name}`)\n        .join(', ')\n    document.getElementById('diallingcode').innerHTML =\n      'Dialling Code: +' + countryData.callingCodes[0]\n    document.getElementById(\n      'population'\n    ).innerHTML = `Population: ${countryData.population}`\n\n    //if trip is less than 4 days away, display the current weather\n    if (travelData.daysTillDepart <= 1) {\n      document.getElementById(\n        'weatherCurrent'\n      ).innerHTML = `Today\\'s weather: ${travelData.data[0].temp} °C `\n      const weatherIcon = document.createElement('img')\n      weatherIcon.id = 'icon'\n      weatherIcon.src =\n        'https://www.weatherbit.io/static/img/icons' +\n        travelData.data[0].weather.icon +\n        '.png'\n      document.getElementById('weatherCurrent').appendChild(weatherIcon)\n    } else {\n      document.getElementById('weatherHeading').innerHTML =\n        '16- Day Weather Forecast'\n\n      for (let i = 0; i < 16; i++) {\n        const weatherForecast = document.getElementById('weatherForecast')\n\n        const date = document.createElement('div')\n        date.textContent = travelData.data[i].datetime\n        const highTemp = document.createElement('div')\n        highTemp.textContent = `Max temp: ${travelData.data[i].high_temp}`\n        const lowTemp = document.createElement('div')\n        lowTemp.textContent = `Min temp: ${travelData.data[i].low_temp}`\n        const icon = document.createElement('img')\n        icon.src =\n          'https://www.weatherbit.io/static/img/icons/' +\n          travelData.data[i].weather.icon +\n          '.png'\n        icon.alt = 'weather icon'\n\n        weatherForecast.appendChild(date)\n        weatherForecast.appendChild(highTemp)\n        weatherForecast.appendChild(icon)\n        weatherForecast.appendChild(lowTemp)\n        weatherForecast.appendChild(icon)\n      }\n    }\n  } catch (error) {\n    console.log('error', error)\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};"],"sourceRoot":""}